<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Tamil Learning App</title>
  <link rel="manifest" href="manifest.json">
  <meta name="theme-color" content="#4f46e5">

  <style>
    body{font-family:Arial,sans-serif;background:#f5f7fa;display:flex;justify-content:center;align-items:center;height:100vh;margin:0}
    .app{background:#fff;padding:20px;border-radius:14px;width:380px;box-shadow:0 10px 25px rgba(0,0,0,.1);text-align:center}
    h1{font-size:20px;margin-bottom:10px}
    p{font-size:14px;color:#555}

    .hidden{display:none}

    .grid{display:grid;grid-template-columns:1fr 1fr;gap:12px;margin-top:15px}
    .btn{padding:14px;border:none;border-radius:12px;color:#fff;font-size:16px;cursor:pointer}
    .animals{background:#4f46e5}.birds{background:#0284c7}.fruits{background:#16a34a}
    .verbs{background:#ca8a04}.household{background:#0f766e}.grocery{background:#7c3aed}

    .card{height:160px;background:#4f46e5;color:#fff;border-radius:12px;display:flex;align-items:center;justify-content:center;font-size:28px;cursor:pointer;margin:12px 0}
    .inner{width:100%;height:100%;position:relative;transform-style:preserve-3d;transition:transform .6s}
    .inner.flipped{transform:rotateY(180deg)}
    .side{position:absolute;width:100%;height:100%;backface-visibility:hidden;display:flex;align-items:center;justify-content:center;padding:10px}
    .back{background:#16a34a;transform:rotateY(180deg);font-size:22px}

    .fc-nav{display:flex;justify-content:space-between;margin-top:10px}

    .options{display:flex;flex-direction:column;gap:10px;margin:14px 0}
    .opt{padding:10px;border-radius:8px;border:1px solid #c7d2fe;background:#eef2ff;color:#1f2937;cursor:pointer}
    .correct{background:#bbf7d0;color:#065f46}
    .wrong{background:#fecaca;color:#7f1d1d}

    .quiz-nav{display:flex;justify-content:space-between;margin-top:12px}

    button{padding:8px 14px;border:none;border-radius:8px;background:#4f46e5;color:#fff;cursor:pointer}
    #speak,#speakQuiz{margin:10px 0;background:#9ca3af}
  </style>
</head>
<body>
<div class="app">

<!-- HOME -->
<div id="home">
  <h1>ğŸ“˜ Tamil Learning</h1>
  <p>Select a category</p>
  <div class="grid">
    <button class="btn animals" onclick="selectCategory('animals')">ğŸ¾ Animals</button>
    <button class="btn birds" onclick="selectCategory('birds')">ğŸ¦ Birds</button>
    <button class="btn fruits" onclick="selectCategory('fruits')">ğŸ Fruits</button>
    <button class="btn verbs" onclick="selectCategory('verbs')">ğŸƒ Verbs</button>
    <button class="btn household" onclick="selectCategory('household')">ğŸ  Household</button>
    <button class="btn grocery" onclick="selectCategory('grocery')">ğŸ›’ Grocery</button>
  </div>
</div>

<!-- MODE -->
<div id="mode" class="hidden">
  <h1 id="modeTitle"></h1>
  <p>Select learning mode</p>
  <div class="grid">
    <button class="btn animals" onclick="startFlashcards()">ğŸƒ Flashcards</button>
    <button class="btn birds" onclick="startQuiz()">ğŸ§  Quiz</button>
  </div>
  <button style="margin-top:12px" onclick="goHome()">â¬… Home</button>
</div>

<!-- FLASHCARDS -->
<div id="flash" class="hidden">
  <h1 id="flashTitle"></h1>
  <button id="speak">ğŸ”Š Listen</button>
  <div class="card" onclick="flipCard()">
    <div class="inner" id="cardInner">
      <div class="side" id="front"></div>
      <div class="side back" id="back"></div>
    </div>
  </div>
  <div class="fc-nav">
    <button onclick="prev()">Previous</button>
    <button onclick="next()">Next</button>
  </div>
  <p id="counter"></p>
  <button onclick="goHome()">â¬… Home</button>
</div>

<!-- QUIZ -->
<div id="quiz" class="hidden">
  <h1 id="quizTitle"></h1>
  <div id="question" style="font-size:26px;margin:14px 0"></div>
  <button id="speakQuiz">ğŸ”Š Listen</button>
  <div class="options" id="options"></div>
  <div class="quiz-nav">
    <button onclick="goHome()">â¬… Home</button>
    <button onclick="nextQuiz()">Next â¡</button>
  </div>
  <p id="quizCounter"></p>
</div>

</div>

<script>
// ===== DATA =====
const DATA={
 animals:['à®¨à®¾à®¯à¯|Dog','à®ªà¯‚à®©à¯ˆ|Cat','à®¯à®¾à®©à¯ˆ|Elephant','à®šà®¿à®™à¯à®•à®®à¯|Lion','à®ªà¯à®²à®¿|Tiger','à®®à®¾à®Ÿà¯|Cow','à®•à¯à®¤à®¿à®°à¯ˆ|Horse','à®†à®Ÿà¯|Goat','à®šà¯†à®®à¯à®®à®±à®¿à®¯à®¾à®Ÿà¯|Sheep','à®•à¯à®°à®™à¯à®•à¯|Monkey','à®•à®°à®Ÿà®¿|Bear','à®¨à®°à®¿|Fox','à®®à®¾à®©à¯|Deer','à®’à®Ÿà¯à®Ÿà®•à®®à¯|Camel','à®ªà®©à¯à®±à®¿|Pig','à®à®²à®¿|Mouse','à®®à¯à®¯à®²à¯|Rabbit','à®¨à¯€à®°à¯à®¯à®¾à®©à¯ˆ|Hippopotamus','à®®à¯à®¤à®²à¯ˆ|Crocodile','à®ªà®¾à®®à¯à®ªà¯|Snake'],
 birds:['à®•à®¾à®•à®®à¯|Crow','à®•à®¿à®³à®¿|Parrot','à®®à®¯à®¿à®²à¯|Peacock','à®šà®¿à®Ÿà¯à®Ÿà¯à®•à¯à®•à¯à®°à¯à®µà®¿|Sparrow','à®†à®¨à¯à®¤à¯ˆ|Owl','à®ªà¯à®±à®¾|Pigeon','à®µà®¾à®¤à¯à®¤à¯|Duck','à®•à¯‹à®´à®¿|Hen','à®šà¯‡à®µà®²à¯|Rooster','à®•à¯à®¯à®¿à®²à¯|Cuckoo','à®ªà®°à¯à®¨à¯à®¤à¯|Eagle','à®•à®´à¯à®•à¯|Vulture','à®¨à®¾à®°à¯ˆ|Stork','à®®à¯€à®©à¯à®•à¯Šà®¤à¯à®¤à®¿|Kingfisher','à®…à®©à¯à®©à®®à¯|Swan','à®µà®¾à®©à¯à®•à¯‹à®´à®¿|Turkey','à®ªà¯†à®©à¯à®•à¯à®¯à®¿à®©à¯|Penguin','à®¤à¯à®®à¯à®ªà®¿|Bulbul','à®®à¯ˆà®©à®¾|Myna','à®¨à®¾à®°à¯ˆà®®à¯‚à®•à¯à®•à¯|Crane'],
 fruits:['à®†à®ªà¯à®ªà®¿à®³à¯|Apple','à®µà®¾à®´à¯ˆà®ªà¯à®ªà®´à®®à¯|Banana','à®®à®¾à®®à¯à®ªà®´à®®à¯|Mango','à®¤à®¿à®°à®¾à®Ÿà¯à®šà¯ˆ|Grapes','à®†à®°à®à¯à®šà¯|Orange','à®à®²à¯à®®à®¿à®šà¯à®šà¯ˆ|Lemon','à®ªà®ªà¯à®ªà®¾à®³à®¿|Papaya','à®•à¯Šà®¯à¯à®¯à®¾|Guava','à®®à®¾à®¤à¯à®³à¯ˆ|Pomegranate','à®…à®©à¯à®©à®¾à®šà®¿|Pineapple','à®¸à¯à®Ÿà¯à®°à®¾à®ªà¯†à®°à®¿|Strawberry','à®ªà¯‡à®°à®¿à®•à¯à®•à®¾à®¯à¯|Pear','à®šà®ªà¯à®ªà¯‹à®Ÿà¯à®Ÿà®¾|Sapota','à®¨à®¾à®µà®±à¯à®ªà®´à®®à¯|Jamun','à®†à®®à®£à®•à¯à®•à¯|Fig','à®ªà®¿à®³à®®à¯|Plum','à®šà¯†à®°à¯à®°à®¿|Cherry','à®ªà¯€à®šà¯|Peach','à®ªà¯‡à®°à®¿à®šà¯à®šà¯ˆ|Date','à®•à®¿à®µà®¿|Kiwi'],
 verbs:['à®ªà®Ÿà®¿|Read','à®à®´à¯à®¤à¯|Write','à®“à®Ÿà¯|Run','à®¨à®Ÿ|Walk','à®šà®¾à®ªà¯à®ªà®¿à®Ÿà¯|Eat','à®•à¯à®Ÿà®¿|Drink','à®ªà¯‡à®šà¯|Speak','à®•à¯‡à®³à¯|Listen','à®ªà®¾à®°à¯|See','à®à®Ÿà¯|Take','à®•à¯Šà®Ÿà¯|Give','à®µà®¾|Come','à®ªà¯‹|Go','à®‰à®Ÿà¯à®•à®¾à®°à¯|Sit','à®¨à®¿à®²à¯|Stand','à®¤à¯‚à®™à¯à®•à¯|Sleep','à®à®´à¯|Wake','à®µà®¿à®³à¯ˆà®¯à®¾à®Ÿà¯|Play','à®µà¯‡à®²à¯ˆà®šà¯†à®¯à¯|Work','à®šà®¿à®¨à¯à®¤à®¿|Think'],
 household:['à®®à¯‡à®œà¯ˆ|Table','à®¨à®¾à®±à¯à®•à®¾à®²à®¿|Chair','à®•à®Ÿà¯à®Ÿà®¿à®²à¯|Bed','à®…à®²à®®à®¾à®°à®¿|Cupboard','à®•à®¤à®µà¯|Door','à®œà®©à¯à®©à®²à¯|Window','à®µà®¿à®³à®•à¯à®•à¯|Lamp','à®®à®¿à®©à¯à®µà®¿à®šà®¿à®±à®¿|Fan','à®Ÿà®¿à®µà®¿|Television','à®ƒà®ªà¯à®°à®¿à®Ÿà¯à®œà¯|Refrigerator','à®…à®Ÿà¯à®ªà¯à®ªà¯|Stove','à®ªà®¾à®¤à¯à®¤à®¿à®°à®®à¯|Vessel','à®•à®°à®£à¯à®Ÿà®¿|Spoon','à®¤à®Ÿà¯à®Ÿà¯|Plate','à®•à®¿à®£à¯à®£à®®à¯|Bowl','à®¤à¯à®Ÿà¯ˆà®ªà¯à®ªà®®à¯|Broom','à®•à®Ÿà®¿à®•à®¾à®°à®®à¯|Clock','à®¤à®²à¯ˆà®¯à®£à¯ˆ|Pillow','à®ªà¯‹à®°à¯à®µà¯ˆ|Blanket','à®¤à¯Šà®²à¯ˆà®ªà¯‡à®šà®¿|Telephone'],
 grocery:['à®…à®°à®¿à®šà®¿|Rice','à®•à¯‹à®¤à¯à®®à¯ˆ|Wheat','à®šà®°à¯à®•à¯à®•à®°à¯ˆ|Sugar','à®‰à®ªà¯à®ªà¯|Salt','à®à®£à¯à®£à¯†à®¯à¯|Oil','à®ªà®¾à®²à¯|Milk','à®¤à®¯à®¿à®°à¯|Curd','à®µà¯†à®£à¯à®£à¯†à®¯à¯|Butter','à®®à¯à®Ÿà¯à®Ÿà¯ˆ|Egg','à®ªà®°à¯à®ªà¯à®ªà¯|Lentils','à®•à®Ÿà®²à¯ˆ|Peanut','à®ªà®¾à®šà®¿à®ªà¯à®ªà®¯à®±à¯|Green gram','à®‰à®°à¯à®³à¯ˆà®•à¯à®•à®¿à®´à®™à¯à®•à¯|Potato','à®µà¯†à®™à¯à®•à®¾à®¯à®®à¯|Onion','à®¤à®•à¯à®•à®¾à®³à®¿|Tomato','à®®à®¿à®³à®•à®¾à®¯à¯|Chilli','à®®à®à¯à®šà®³à¯|Turmeric','à®®à®¿à®³à®•à¯|Pepper','à®šà¯€à®°à®•à®®à¯|Cumin','à®•à¯Šà®¤à¯à®¤à®®à®²à¯à®²à®¿|Coriander']
};

let category='',list=[],i=0,score=0;

function show(id){
  ['home','mode','flash','quiz'].forEach(s=>document.getElementById(s).classList.add('hidden'));
  document.getElementById(id).classList.remove('hidden');
}

function goHome(){ show('home'); }

function selectCategory(c){
  if(!DATA[c]) return;
  category=c;
  list=DATA[c].map(x=>{const[t,e]=x.split('|');return{ta:t,en:e}});
  document.getElementById('modeTitle').textContent=c.toUpperCase();
  show('mode');
}

// FLASHCARDS
function startFlashcards(){
  i=0;
  show('flash');
  document.getElementById('flashTitle').textContent=category.toUpperCase();
  updateCard();
}
function updateCard(){
  cardInner.classList.remove('flipped');
  front.textContent=list[i].ta;
  back.textContent=list[i].en;
  counter.textContent=`${i+1}/${list.length}`;
}
function flipCard(){ cardInner.classList.toggle('flipped'); }
function next(){ if(i<list.length-1){i++;updateCard();} }
function prev(){ if(i>0){i--;updateCard();} }

// QUIZ
function startQuiz(){
  i=0; score=0;
  show('quiz');
  quizTitle.textContent=category.toUpperCase();
  loadQuiz();
}

function loadQuiz(){
  const q=list[i];
  question.textContent=q.ta;
  options.innerHTML='';
  quizCounter.textContent=`${i+1}/${list.length}`;
  let answered=false;
  let opts=[q.en,...shuffle(list.filter(x=>x.en!==q.en)).slice(0,3).map(x=>x.en)];
  shuffle(opts).forEach(o=>{
    const b=document.createElement('button');
    b.className='opt';
    b.textContent=o;
    b.onclick=()=>{
      if(answered) return;
      answered=true;
      document.querySelectorAll('.opt').forEach(btn=>btn.disabled=true);
      if(o===q.en){score++;b.classList.add('correct');}
      else{
        b.classList.add('wrong');
        document.querySelectorAll('.opt').forEach(btn=>{if(btn.textContent===q.en)btn.classList.add('correct');});
      }
    };
    options.appendChild(b);
  });
}

function nextQuiz(){
  if(i<list.length-1){ i++; loadQuiz(); }
  else{ alert(`Score: ${score}/${list.length}`); goHome(); }
}

function shuffle(a){ return a.sort(()=>Math.random()-0.5); }

// AUDIO
let voice=null;
function loadVoices(){
  const v=speechSynthesis.getVoices();
  voice=v.find(x=>x.lang==='ta-IN')||v.find(x=>x.lang&&x.lang.startsWith('ta'));
}
speechSynthesis.onvoiceschanged=loadVoices; loadVoices();

speak.onclick=()=>{
  speechSynthesis.cancel();
  const u=new SpeechSynthesisUtterance(front.textContent);
  u.lang='ta-IN'; if(voice)u.voice=voice;
  speechSynthesis.speak(u);
};

speakQuiz.onclick=()=>{
  speechSynthesis.cancel();
  const u=new SpeechSynthesisUtterance(question.textContent);
  u.lang='ta-IN'; if(voice)u.voice=voice;
  speechSynthesis.speak(u);
};

// PWA
if('serviceWorker'in navigator){
  window.addEventListener('load',()=>navigator.serviceWorker.register('service-worker.js'));
}
</script>
</body>
</html>
